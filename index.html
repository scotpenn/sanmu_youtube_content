<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>“三木有话说”频道交互式战略仪表盘</title>
    <meta name="robots" content="noindex, nofollow">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Wisdom Palette -->
    <!-- Application Structure Plan: 本应用设计为一个单页交互式仪表盘，旨在将静态的战略报告转化为一个动态、可探索的决策工具。结构分为四个核心板块：1. 战略转型核心：直观展示从“旧定位”到“新定位”的转变，让用户立刻抓住战略精髓。2. 三大内容支柱（交互式筛选器）：将报告中的三大支柱设计为可点击的筛选按钮，用户通过点击可以直接筛选下方的内容蓝图，实现了从宏观策略到具体选题的无缝联动，这种任务驱动的结构比线性阅读报告更高效。3. 内容战略蓝图（可展开卡片）：将20个选题以卡片网格形式呈现，点击可展开查看详情。这种设计避免了信息过载，让用户可以按需探索，聚焦于感兴趣的选题。4. 增长飞轮与数据洞察：通过HTML/CSS构建的“帮助-主干-英雄”模型图和Chart.js的柱状图，将抽象的增长模型和内容分布数据可视化，帮助用户理解内容生态的构建方式。整个结构旨在引导用户从“理解战略”到“探索选题”再到“构思执行”，形成一个完整的决策支持闭环。 -->
    <!-- Visualization & Content Choices: 1. 战略转型对比：使用左右分栏的HTML结构，清晰对比新旧定位，目标是“告知”。2. 内容支柱筛选器：使用HTML按钮组结合JS事件监听，实现对下方卡片列表的动态筛选，目标是“组织”和“互动”。3. 选题详情卡片：使用HTML/CSS构建可点击展开的卡片，内部包含结构化文本，用于“告知”和“组织”每个选题的详细策略，JS控制显隐。4. 增长飞轮图：使用Tailwind CSS的Flexbox和Grid布局构建一个流程图，替代静态图片，目标是“展示关系”。5. 选题支柱分布图：使用Chart.js的柱状图，将20个选题按三大支柱进行数据统计和可视化，目标是“比较”和“告知”内容策略的分布情况。所有选择均未使用SVG或Mermaid，完全符合技术要求，并服务于将报告内容转化为易于理解和操作的交互体验。 -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #FFF8F3;
            color: #383838;
        }
        .hero-section {
            position: relative;
            height: 60vh;
            min-height: 400px;
            overflow: hidden;
        }
        .hero-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to bottom, rgba(255, 140, 90, 0.85), rgba(255, 195, 120, 0.7));
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .pillar-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .pillar-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.07), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .pillar-card.active {
            border-color: #FF8C5A;
            background-color: #FFF4ED;
            transform: translateY(-2px);
        }
        .topic-card-details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.7s ease-in-out;
        }
        .topic-card.open .topic-card-details {
            max-height: 1000px;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            height: 320px;
            max-height: 400px;
        }
        .btn-primary {
            background-color: #FF8C5A;
            color: #FFFFFF;
            transition: background-color 0.3s;
        }
        .btn-primary:hover {
            background-color: #FF7043;
        }
        .section-title {
            color: #D35F3C;
        }
        .accent-teal {
            color: #4ECDC4;
        }
        .bg-warm-yellow {
            background-color: #FFE0A3;
        }
        .bg-warm-coral {
            background-color: #FFB59A;
        }
        .login-error {
            animation: shake 0.5s;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
    </style>
</head>
<body class="antialiased">

    <div id="login-overlay" class="fixed inset-0 bg-gray-100 bg-opacity-75 backdrop-blur-sm flex items-center justify-center z-50">
        <div class="w-full max-w-sm bg-white p-8 rounded-2xl shadow-lg text-center">
            <h2 class="text-2xl font-bold section-title mb-2">访问授权</h2>
            <p class="text-gray-500 mb-6">请输入密码以继续</p>
            <form id="login-form">
                <input type="password" id="password-input" class="w-full px-4 py-3 border border-gray-300 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-orange-400" placeholder="Password">
                <p id="error-message" class="text-red-500 text-sm mt-2 h-5"></p>
                <button type="submit" class="w-full btn-primary font-bold py-3 px-6 rounded-lg mt-4">进入</button>
            </form>
        </div>
    </div>

    <div id="main-content" class="hidden">
        <div class="hero-section">
            <img src="./assets/images/Steveston.png" alt="Steveston Harbor" class="absolute inset-0 w-full h-full object-cover">
            <div class="hero-overlay">
                <div class="text-center text-white px-6">
                    <h1 class="text-4xl md:text-6xl font-bold mb-4">"三木有话说"频道</h1>
                    <p class="text-xl md:text-2xl">交互式内容战略仪表盘</p>
                </div>
            </div>
        </div>

        <main class="container mx-auto px-6 py-12 pb-20">
            
            <section id="pillars" class="mb-16">
                <div class="text-center mb-10">
                    <h2 class="text-2xl md:text-3xl font-bold section-title">第一部分：聚焦三大内容支柱</h2>
                    <p class="mt-2 text-gray-500">点击下方卡片，筛选您感兴趣的内容方向</p>
                </div>
                <div class="grid md:grid-cols-3 gap-6 text-center">
                    <div id="pillar-filter-1" data-pillar="人生解惑" class="pillar-card p-6 bg-white rounded-2xl border-2 border-transparent cursor-pointer">
                        <h3 class="font-bold text-lg">人生解惑与存在主义导航</h3>
                        <p class="text-sm text-gray-500 mt-2">回答“我该如何生活？”的终极问题，为观众提供精神“锚点”。</p>
                    </div>
                    <div id="pillar-filter-2" data-pillar="情绪工具" class="pillar-card p-6 bg-white rounded-2xl border-2 border-transparent cursor-pointer">
                        <h3 class="font-bold text-lg">情绪工具与关系处理</h3>
                        <p class="text-sm text-gray-500 mt-2">解决“我该如何与自己和他人相处？”的现实难题。</p>
                    </div>
                    <div id="pillar-filter-3" data-pillar="禁忌揭秘" class="pillar-card p-6 bg-white rounded-2xl border-2 border-transparent cursor-pointer">
                        <h3 class="font-bold text-lg">禁忌揭秘与实用智慧</h3>
                        <p class="text-sm text-gray-500 mt-2">满足“不敢问但又必须知道的事”的好奇心与实用需求。</p>
                    </div>
                </div>
                <div class="text-center mt-6">
                    <button id="clear-filter" class="btn-primary font-bold py-2 px-6 rounded-full text-sm">显示全部</button>
                </div>
            </section>

            <section id="content-blueprint" class="mb-16">
                <div class="text-center mb-10">
                    <h2 class="text-2xl md:text-3xl font-bold section-title">第二部分：探索“帮助型”内容蓝图</h2>
                    <p class="mt-2 text-gray-500">这里是20个精心设计的引流视频选题，点击卡片展开查看详细策略</p>
                </div>
                <div id="topic-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                </div>
            </section>

            <section id="used-topics" class="mb-16">
                <div class="text-center mb-10">
                    <h2 class="text-2xl font-bold section-title">已使用选题库</h2>
                    <p class="mt-2 text-gray-500">已经制作成视频的选题记录</p>
                </div>
                <div id="used-topics-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Used topics will be displayed here -->
                </div>
            </section>

            <section id="content-directory" class="mb-16">
                <div class="text-center mb-10">
                    <h2 class="text-2xl md:text-3xl font-bold section-title">第三部分：内容目录</h2>
                    <p class="mt-2 text-gray-500">已完成的深度内容库，点击查看详情</p>
                </div>
                <div id="library-list" class="bg-white p-6 md:p-8 rounded-2xl shadow-sm space-y-4">
                    <!-- Content library links will be dynamically added here -->
                </div>
                <div class="text-center mt-6">
                    <button id="add-article-btn" class="btn-primary font-bold py-2 px-6 rounded-full text-sm">
                        + 添加新文章
                    </button>
                </div>
            </section>

            <!-- Add Article Modal -->
            <div id="add-article-modal" class="fixed inset-0 bg-gray-600 bg-opacity-75 hidden items-center justify-center z-50">
                <div class="bg-white p-8 rounded-2xl shadow-lg max-w-md w-full mx-4">
                    <h3 class="text-xl font-bold mb-4">添加新文章</h3>
                    <form id="add-article-form">
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">文章标题</label>
                            <input type="text" id="article-title" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-A58D78">
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">文章ID（用于文件名）</label>
                            <input type="text" id="article-id" required pattern="[a-z0-9-]+" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-A58D78">
                            <p class="text-xs text-gray-500 mt-1">只能使用小写字母、数字和连字符</p>
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">文章类型</label>
                            <select id="article-type" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-A58D78">
                                <option value="信息图">信息图</option>
                                <option value="研究文件">研究文件</option>
                                <option value="深度分析">深度分析</option>
                                <option value="实用指南">实用指南</option>
                            </select>
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">文件格式</label>
                            <select id="article-format" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-A58D78">
                                <option value="md">Markdown (.md)</option>
                                <option value="js">JavaScript (.js)</option>
                            </select>
                        </div>
                        <div class="flex justify-end space-x-3">
                            <button type="button" id="cancel-article" class="px-4 py-2 text-gray-600 hover:text-gray-800">取消</button>
                            <button type="submit" class="btn-primary px-4 py-2 rounded-lg">生成配置</button>
                        </div>
                    </form>
                    <div id="article-config" class="hidden mt-6 p-4 bg-orange-100 rounded-lg">
                        <h4 class="font-bold mb-2">生成的配置：</h4>
                        <pre id="config-code" class="text-sm overflow-x-auto"></pre>
                        <p class="text-sm text-gray-600 mt-2">请将此配置添加到 contentLibraryData 数组中</p>
                    </div>
                </div>
            </div>

            <section id="growth-flywheel">
                <div class="text-center mb-12">
                    <h2 class="text-2xl md:text-3xl font-bold section-title">第四部分：构建增长飞轮</h2>
                    <p class="mt-2 text-gray-500">通过内容联动，将一次性观众转化为长期粉丝</p>
                </div>
                <div class="grid lg:grid-cols-2 gap-12 items-center">
                    <div>
                        <h3 class="font-bold text-xl mb-4 text-center">内容生态系统</h3>
                        <div class="space-y-6">
                            <div class="bg-white p-6 rounded-2xl shadow-sm">
                                <h4 class="font-bold text-lg text-teal-600">1. 帮助 (Help) - 引流</h4>
                                <p class="text-gray-600 mt-1">通过解决具体、高搜索量的情绪或实用问题（如“如何停止精神内耗”），吸引新观众。本页面的20个选题即为此类内容。</p>
                            </div>
                            <div class="text-center">
                                <svg class="w-8 h-8 text-gray-400 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
                            </div>
                            <div class="bg-white p-6 rounded-2xl shadow-sm">
                                <h4 class="font-bold text-lg text-orange-600">2. 主干 (Hub) - 留存</h4>
                                <p class="text-gray-600 mt-1">在“帮助”视频结尾，引导观众观看能深化情感连接的“主干”内容（如《一场只有3个参与者的葬礼》），培养观看习惯和社群认同。</p>
                            </div>
                             <div class="text-center">
                                <svg class="w-8 h-8 text-gray-400 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
                            </div>
                            <div class="bg-white p-6 rounded-2xl shadow-sm">
                                <h4 class="font-bold text-lg text-amber-600">3. 英雄 (Hero) - 破圈</h4>
                                <p class="text-gray-600 mt-1">通过策划大型、高概念的“英雄”内容（如《邀请100位年轻人写下墓志铭》的社会实验），实现破圈传播，确立频道品牌地位。</p>
                            </div>
                        </div>
                    </div>
                    <div class="mt-10 lg:mt-0">
                         <h3 class="font-bold text-xl mb-4 text-center">选题策略分布</h3>
                        <div class="bg-white p-6 rounded-2xl shadow-sm">
                            <div class="chart-container">
                                <canvas id="pillarsChart"></canvas>
                            </div>
                             <p class="text-center text-sm text-gray-500 mt-4">此图表展示了20个“帮助型”选题在三大内容支柱上的分布情况，确保了内容策略的平衡性与多样性。</p>
                        </div>
                    </div>
                </div>
            </section>

        </main>
        
        <footer class="text-center py-8 border-t border-gray-200">
            <p class="text-gray-500 text-sm">为“三木有话说”频道量身打造的交互式战略规划</p>
        </footer>
    </div>

    <script>
        // Define data and functions at the global scope
        const topicsData = [
            { id: 1, pillar: '人生解惑', title: '【三木】停止精神内耗的终极答案：我在无数告别中发现的3个生活原则', status: 'unused', status: 'unused', details: '<strong>目标用户痛点：</strong>直接命中"高压生活者"和"存在主义焦虑者"普遍存在的"精神内耗"和"选择困难"的痛点。<br><strong>三木角色定位：</strong>塑造三木为"智者"，从终局回看，提炼出超越日常琐碎的宏观智慧。<br><strong>内容切入点与价值主张：</strong>以一个因犹豫和内耗而留下巨大遗憾的真实故事引入。然后提炼出3个可被观众立刻应用的思维模型。价值在于将殡葬师的洞察转化为观众可执行的"人生算法"。<br><strong>SEO价值：</strong>强力捕捉"精神内耗"、"如何停止胡思乱想"、"人生意义"、"活在当下"等高搜索量关键词。' },
            { id: 2, pillar: '情绪工具', title: '如何与"正在经历悲伤"的家人/朋友交谈？（附：绝对不能说的5句话）', status: 'unused', status: 'unused', details: '<strong>目标用户痛点：</strong>解决了年轻人在面对他人痛苦时"想帮忙却怕说错话"的强烈社交焦虑。<br><strong>三木角色定位：</strong>强化三木作为"共情者"和"引路人"的形象，提供极其实用的社交工具。<br><strong>内容切入点与价值主张：</strong>采用"Do\'s & Don\'ts"结构。用三木见证过的"笨拙但真诚的安慰"和"造成二次伤害的言语"作对比。提供可直接使用的"话术脚本"。<br><strong>SEO价值：</strong>目标关键词"如何安慰人"、"朋友失恋了怎么安慰"、"高情商安慰"等。' },
            { id: 3, pillar: '禁忌揭秘', title: '"身后事"极简清单：普通人需要提前为自己和家人准备什么？', status: 'unused', details: '<strong>目标用户痛点：</strong>将一个沉重的话题转化为一个可控、可执行的"项目管理"任务，降低心理门槛。<br><strong>三木角色定位：</strong>体现三木作为"引路人"的专业性和关怀，将复杂的流程梳理成清晰、温暖的指南。<br><strong>内容切入点与价值主-张：</strong>不仅仅是罗列清单，而是解释每一项准备背后的意义——"这不是在走向死亡，而是在更好地生活"。<br><strong>SEO价值：</strong>捕捉"生前整理"、"数字遗产"、"家庭应急"等实用性极强的搜索词。' },
            { id: 4, pillar: '人生解惑', title: '"为什么是我？"——当你感觉被生活反复捶打时，请打开这个视频', status: 'unused', details: '<strong>目标用户痛点：</strong>针对年轻人在遭遇挫折、不公或厄运时普遍会产生的"受害者心态"和"存在主义危机"。<br><strong>三木角色定位：</strong>扮演"见证者"和"智者"，提供一个超越个人痛苦的宏大视角。<br><strong>内容切入点与价值主张：</strong>核心价值不是给出答案，而是改变提问的方式。引导观众从"为什么是我受苦？"转向"这段经历想教会我什么？"。<br><strong>SEO价值：</strong>关键词"人生低谷"、"如何走出痛苦"、"感觉不公平"、"治愈"等。' },
            { id: 5, pillar: '情绪工具', title: '如何处理与父母在"生死观"上的巨大分歧？', status: 'unused', details: '<strong>目标用户痛点：</strong>这是一个非常具体且普遍的代际冲突场景，年轻人希望开明地讨论，而父母可能非常忌讳。<br><strong>三木角色定位：</strong>作为"共情者"和"引路人"，他既理解年轻人的想法，也懂得老一辈的恐惧。<br><strong>内容切入点与价值主张：</strong>提供具体的沟通策略和话术，例如"不要在节假日谈"、"从关心父母的健康和愿望开始"。<br><strong>SEO价值：</strong>目标关键词"和父母沟通"、"代际冲突"、"家庭关系"、"生死教育"。' },
            { id: 6, pillar: '人生解惑', title: '我见过最"值得"的人生，都有一个共同点', status: 'unused', details: '<strong>目标用户痛点：</strong>回应年轻人对于"成功"和"人生价值"的迷茫，提供一个关于"何为值得"的另类答案。<br><strong>三木角色定位：</strong>"智者"形象。通过对比不同社会身份的临终状态，提炼出超越物质和名望的共同价值。<br><strong>内容切入点与价值主张：</strong>核心是打破"财富=成功"的单一叙事，为观众提供多元的价值坐标。<br><strong>SEO价值：</strong>捕捉"人生意义"、"什么是成功"、"如何活出价值"、"个人成长"等核心人生议题。' },
            { id: 7, pillar: '禁忌揭秘', title: '宠物离世指南：我们该如何与"毛孩子"好好告别？', status: 'unused', details: '<strong>目标用户痛点：</strong>随着养宠人群的扩大，宠物离世带来的悲伤和仪式需求日益增长，但相关指导却很缺乏。<br><strong>三木角色定位：</strong>"共情者"。将对人的关怀延伸到对动物生命的尊重上。<br><strong>内容切入点与价值主张：</strong>提供从心理调适到具体仪式的全流程指导。承认并正当化"为宠物悲伤"的情感。<br><strong>SEO价值：</strong>关键词"宠物去世怎么办"、"宠物殡葬"、"如何走出宠物离世的悲伤"。' },
            { id: 8, pillar: '情绪工具', title: '"断舍离"终极版：如何处理逝去亲人的遗物？', status: 'unused', details: '<strong>目标用户痛点：</strong>这是一个极其痛苦和纠结的过程，处理遗物往往会引发第二波巨大的悲伤。<br><strong>三木角色定位：</strong>"情绪疗愈师"。他能理解这种纠结，并提供兼具情感关怀和操作性的建议。<br><strong>内容切入点与价值主张：</strong>提出"分类法"：分为"保留-传承"、"赠予-分享"、"封存-告别"三类。强调这不是"丢弃"，而是"转化"记忆的形式。<br><strong>SEO价值：</strong>关键词"如何处理遗物"、"睹物思人"、"走出悲伤"。' },
            { id: 9, pillar: '人生解惑', title: '如果你害怕"错过"，不妨听听那些"最后悔"的人说了什么', status: 'unused', details: '<strong>目标用户痛点：</strong>针对年轻人的"FOMO"（Fear of Missing Out）心态，即对错过机会的普遍焦虑。<br><strong>三木角色定位：</strong>"见证者"。他见证了人生真正的"错过"是什么，他的话语具有终极的说服力。<br><strong>内容切入点与价值主张：</strong>揭示一个反直觉的真相：人们临终时后悔的，往往是"没能好好爱身边的人"、"没活出真实的自己"。<br><strong>SEO价值：</strong>关键词"人生遗憾"、"错过的机会"、"如何选择"、"活在当下"。' },
            { id: 10, pillar: '禁忌揭秘', title: '立一份"情感遗嘱"：除了财产，你最想为家人留下什么？', status: 'unused', details: '<strong>目标用户痛点：</strong>这是对"写遗嘱"这一话题的感性升级。年轻人可能没有多少财产，但他们有丰富的情感和想要表达的爱。<br><strong>三木角色定位：</strong>"引路人"。引导观众进行一次深刻的自我审视和情感梳理。<br><strong>内容切入点与价值主张：</strong>提供"情感遗嘱"的模板和引导性问题，将遗嘱从法律文件升华为爱的礼物。<br><strong>SEO价值：</strong>关键词"情感遗嘱"、"给家人的信"、"人生总结"、"如何表达爱"。' },
            { id: 11, pillar: '情绪工具', title: '如何面对"第一次"参加葬礼的恐惧和不安？', status: 'unused', details: '<strong>目标用户痛点：</strong>专门针对从未有过相关经历的年轻人，为他们进行一次"心理预演"，消除未知带来的恐惧。<br><strong>三木角色定位：</strong>"引路人"和"共情者"。<br><strong>内容切入点与价值主张：</strong>分步讲解全过程，重点不是礼仪，而是"心理建设"。告诉他们"感到悲伤是正常的"、"不知道说什么也是正常的"。<br><strong>SEO价值：</strong>关键词"第一次参加葬礼"、"葬礼恐惧"、"如何面对死亡"。' },
            { id: 12, pillar: '人生解惑', title: '为什么说"好好活着"是对逝者最好的纪念？', status: 'unused', details: '<strong>目标用户痛点：</strong>许多人在亲友离世后会陷入长期的愧疚和自我惩罚，觉得"我不配快乐"。<br><strong>三木角色定位：</strong>"情绪疗愈师"和"智者"。<br><strong>内容切入点与价值主张：</strong>核心论点是：逝者最大的遗愿，一定是希望活着的人能够幸福。将"纪念"从一种沉重的负担，转化为一种积极生活的动力。<br><strong>SEO价值：</strong>关键词"如何纪念亲人"、"走出悲伤"、"活着的意义"。' },
            { id: 13, pillar: '禁忌揭秘', title: '临终关怀到底在做什么？（一个殡葬师的观察视角）', status: 'unused', details: '<strong>目标用户痛点：</strong>"临终关怀"是一个大众听过但并不了解的概念，充满了误解和神秘感。<br><strong>三木角色定位：</strong>"见证者"和"职业揭秘者"。<br><strong>内容切入点与价值主张：</strong>讲述经过临终关怀的逝者与家属的状态有何不同。强调其核心是"提高生命最后一程的质量"，而非"放弃治疗"。<br><strong>SEO价值：</strong>关键词"临终关怀"、"安宁疗护"、"生命的尊严"。' },
            { id: 14, pillar: '情绪工具', title: '如何与孩子谈论"死亡"？（分年龄段实用指南）', status: 'unused', details: '<strong>目标用户痛点：</strong>针对年轻父母的核心育儿难题，这是一个高频、高痛点的搜索需求。<br><strong>三木角色定位：</strong>"引路人"。将他对生死的理解，转化为父母可以使用的、充满智慧的育儿工具。<br><strong>内容切入点与价值主张：</strong>提供分年龄段的沟通策略和比喻。例如，对幼儿可以用"花儿谢了"、"电池用完了"等比喻。<br><strong>SEO价值：</strong>关键词"如何和孩子谈论死亡"、"生命教育"、"儿童心理"。' },
            { id: 15, pillar: '人生解惑', title: '从"墓碑"到"社交账号"：我们希望在世界上留下什么痕迹？', status: 'unused', details: '<strong>目标用户痛点：</strong>这是一个非常现代的存在主义问题，引发年轻人对"数字身份"和"个人品牌"的深层思考。<br><strong>三木角色定位：</strong>"智者"。将古老的"墓志铭"概念与现代的"社交媒体"进行对比。<br><strong>内容切入点与价值主张：</strong>引导观众思考："如果我的社交账号就是我的墓志铭，我希望它呈现一个怎样的我？"。这是一个哲学探讨。<br><strong>SEO价值：</strong>关键词"数字遗产"、"社交媒体"、"个人价值"、"墓志铭"。' },
            { id: 16, pillar: '禁忌揭秘', title: '不同文化/信仰的葬礼有何不同？（一个殡葬师的跨文化观察）', status: 'unused', details: '<strong>目标用户痛点：</strong>满足"深度好奇者"对世界文化多样性的兴趣，同时也是一个非常实用的社交礼仪指南。<br><strong>三木角色定位：</strong>"见证者"和"职业揭秘者"。<br><strong>内容切入点与价值主张：</strong>选择2-3个有代表性的文化进行对比，讲述仪式背后的不同生死观。重点不在于猎奇，而在于展示人类面对告别的共同情感。<br><strong>SEO价值：</strong>关键词"葬礼习俗"、"跨文化交流"、"宗教仪式"。' },
            { id: 17, pillar: '情绪工具', title: '如何原谅一个已经"无法道歉"的人？', status: 'unused', details: '<strong>目标用户痛点：</strong>这是一个深刻的心理困境，可能是与逝去的亲人有未解的心结，或与一个永远离开自己生活的人有旧怨。<br><strong>三木角色定位：</strong>"情绪疗愈师"。<br><strong>内容切入点与价值主-张：</strong>核心观点是："原谅"不是为了对方，而是为了解放自己。提供一些心理学上的方法，如"写一封不会寄出的信"、"进行一次空椅子对话"。<br><strong>SEO价值：</strong>关键词"如何原谅"、"放下过去"、"心理创伤"、"自我和解"。' },
            { id: 18, pillar: '人生解惑', title: '"无常"才是人生的常态：如何拥抱生活中的不确定性？', status: 'unused', details: '<strong>目标用户痛点：</strong>针对年轻人对未来的不确定性感到的巨大焦虑，以及对"稳定"的过度渴望。<br><strong>三木角色定位：</strong>"智者"。他的整个职业都在直面"无常"。<br><strong>内容切入点与价值主张：</strong>通过故事说明，人生最大的确定性就是"不确定性"。与其对抗，不如学会与之共舞。提供心态调整的建议。<br><strong>SEO价值：</strong>关键词"不确定性"、"未来焦虑"、"如何应对变化"、"平常心"。' },
            { id: 19, pillar: '禁忌揭秘', title: '遗体捐献/器官捐献：你需要知道的所有事', status: 'unused', details: '<strong>目标用户痛点：</strong>这是一个高尚但信息不透明的话题。许多年轻人有此意愿，但因流程不清晰、心存疑虑而却步。<br><strong>三木角色定位：</strong>"引路人"和"职业揭秘者"。<br><strong>内容切入点与价值主张：</strong>以Q&A的形式，清晰解答核心问题。强调这是一种生命延续的方式，传递大爱。<br><strong>SEO价值：</strong>关键词"遗体捐献"、"器官捐献"、"生命延续"。' },
            { id: 20, pillar: '情绪工具', title: '当你感到"全世界只剩下自己一个人"时', status: 'unused', status: 'unused', details: '<strong>目标用户痛点：</strong>直击现代社会年轻人的核心痛点——深刻的孤独感。<br><strong>三木角色定位：</strong>"共情者"和"情绪疗愈师"。<br><strong>内容切入点与价值主张：</strong>不提供廉价的建议。而是先承认孤独的普遍性和痛苦，然后分享故事，最后引向"如何与孤独共处"的智慧。<br><strong>SEO价值：</strong>关键词"孤独感"、"如何排解寂寞"、"一个人生活"、"心理健康"。' },
            { id: 21, pillar: '实用指南', title: '亲人离世后的24小时：你需要立刻做的7件事', status: 'unused', status: 'unused', details: '<strong>目标用户痛点：</strong>亲人突然离世所带来的巨大冲击和混乱感，对于关键的第一步（如获取死亡证明、通知机构等）完全不知所措。<br><strong>三木角色定位：</strong><strong>引路人</strong>。在观众最悲痛和无助的时刻，提供一份冷静、专业、可执行的行动清单，成为他们可以信赖的向导。<br><strong>内容切入点与价值主张：</strong>将一个极其情绪化和混乱的危机时刻，转化为一个清晰、有序的流程。这份"急救"指南提供的不仅是信息，更是一种稳定感和掌控感，能瞬间建立观众对频道的深度信任。<br><strong>SEO价值：</strong><strong>核心关键词：</strong> 亲人去世后怎么办、身后事流程、死亡证明、后事处理。' },
            { id: 22, pillar: '实用指南', title: '"数字遗产"清理指南：如何处理逝者的社交媒体和虚拟财产？', status: 'unused', status: 'unused', details: '<strong>目标用户痛点：</strong>这是一个非常现代但又极易被忽略的难题。不知道如何处理逝者的数字痕迹，可能导致隐私风险、情感困扰甚至财产损失（如加密货币）。<br><strong>三木角色定位：</strong><strong>引路人</strong> + <strong>智者</strong>。展现出对现代社会问题的深刻洞察力，引导观众进行前瞻性的规划。<br><strong>内容切入点与价值主张：</strong>提供一份极其前沿且实用的操作清单，解决一个很多人"不知道自己不知道"的问题。内容不仅帮助处理已故亲人的数字遗产，更能促使观众反思并提前规划自己的数字身后事。<br><strong>SEO价值：</strong><strong>核心关键词：</strong> 数字遗产、Digital Legacy、社交媒体账号处理、虚拟财产、个人成长。' },
            { id: 23, pillar: '实用指南', title: '被忽略的福利：亲人离世后，你可以从加拿大政府领取的3笔钱', status: 'unused', status: 'unused', details: '<strong>目标用户痛点：</strong>悲痛中的家庭往往不知道有权申请相关的政府福利（如CPP死亡福利金），在承受情感打击的同时，还可能面临不必要的经济压力。<br><strong>三木角色定位：</strong><strong>引路人</strong>。作为一个信息提供者，为观众带来直接、实在的帮助。<br><strong>内容切入点与价值主张：</strong>纯粹的、高价值的信息服务。这份指南能直接为观众家庭带来经济上的帮助，是建立频道"可靠"、"有用"形象的最快方式，能有效提升观众的分享意愿。<br><strong>SEO价值：</strong><strong>核心关键词：</strong> CPP Death Benefit、Survivor\'s Pension Canada、加拿大身后福利、丧葬补助。' },
            { id: 24, pillar: '实用指南', title: '跨境身后事指南：当意外发生在海外，家人该怎么办？', status: 'unused', status: 'unused', details: '<strong>目标用户痛点：</strong>这是第一代移民群体最独特、也最恐惧的痛点之一。面对复杂的跨国法律、文件和运输流程，家人的去世可能会演变成一场巨大的后勤和法律梦魇。<br><strong>三木角色定位：</strong><strong>引路人</strong>。作为熟悉本地和华人社区情况的专家，为这个极其复杂的难题提供导航。<br><strong>内容切入点与价值主张：</strong>解决核心目标观众的"特有问题"，深度绑定频道与这一群体的关系。通过提供清晰的流程图和避坑指南，将频道打造成北美华人社区在生命议题上不可或缺的资源。<br><strong>SEO价值：</strong><strong>核心关键词：</strong> 海外去世、骨灰回国、领事保护、跨国继承、第一代移民。' },
            { id: 25, pillar: '实用指南', title: '在温哥华，办一场体面的告别究竟要花多少钱？', status: 'unused', status: 'unused', details: '<strong>目标用户痛点：</strong>"钱"是所有人最关心但又最不好意思问的问题。在悲伤的时刻，人们害怕因为不了解行情而被动消费，增加了额外的心理和经济负担。<br><strong>三木角色定位：</strong><strong>见证者</strong> + <strong>引路人</strong>。利用自己的职业身份，为观众揭开行业"不能说的秘密"，展现极大的真诚和权威性。<br><strong>内容切入点与价值主张：</strong>以绝对透明、坦诚的态度，将殡葬服务的所有费用（从殡仪馆到墓地）进行全解析。这种"行业揭秘"式的价值主张，能瞬间破除信息壁垒，建立观众的深度信任。<br><strong>SEO价值：</strong><strong>核心关键词：</strong> 葬礼费用、温哥华葬礼、火葬费用、墓地价格、Funeral Cost Vancouver。' }
        ];

        const contentLibraryData = [
            {
                id: 'pet-goodbye',
                title: '送别毛孩子：一份充满尊严与爱的温哥华指南',
                type: '信息图',
                url: './article.html?topic=pet-goodbye'
            },
            {
                id: 'exhausted',
                title: '停止精神内耗的终极答案',
                type: '深度分析',
                url: './article.html?topic=exhausted&format=md'
            },
            {
                id: 'pet-hospic',
                title: '温哥华本地化选题：毛孩子离世与临终关怀',
                type: '研究文件',
                url: './article.html?topic=pet-hospic&format=md'
            }
            // Future articles will be added here
        ];

        function initializeDashboard() {
            const topicGrid = document.getElementById('topic-grid');
            const pillarFilters = document.querySelectorAll('.pillar-card');
            const clearFilterBtn = document.getElementById('clear-filter');
            const libraryList = document.getElementById('library-list');

            function renderTopics(filter = 'all') {
                topicGrid.innerHTML = '';
                const filteredTopics = filter === 'all' ? topicsData.filter(t => t.status !== 'used') : topicsData.filter(t => t.pillar === filter && t.status !== 'used');
                
                filteredTopics.forEach(topic => {
                    const card = document.createElement('div');
                    card.className = 'topic-card bg-white p-5 rounded-2xl shadow-sm cursor-pointer transition-all duration-300';
                    card.dataset.pillar = topic.pillar;

                    let pillarColorClass = '';
                    switch (topic.pillar) {
                        case '人生解惑': pillarColorClass = 'text-teal-600'; break;
                        case '情绪工具': pillarColorClass = 'text-orange-600'; break;
                        case '禁忌揭秘': pillarColorClass = 'text-amber-600'; break;
                        case '实用指南': pillarColorClass = 'text-purple-600'; break;
                    }

                    card.innerHTML = `
                        <div class="flex justify-between items-start mb-2">
                            <h4 class="font-bold text-md flex-1 pr-2">${topic.title}</h4>
                            <div class="flex items-center gap-2">
                                <span class="text-xs font-semibold ${pillarColorClass} bg-opacity-20 bg-${pillarColorClass.split('-')[1]}-100 py-1 px-2 rounded-full">${topic.pillar}</span>
                                <div class="relative">
                                    <button class="topic-menu-btn text-gray-400 hover:text-gray-600 p-1" data-topic-id="${topic.id}">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="5" r="1"></circle>
                                            <circle cx="12" cy="12" r="1"></circle>
                                            <circle cx="12" cy="19" r="1"></circle>
                                        </svg>
                                    </button>
                                    <div class="topic-menu absolute right-0 top-6 bg-white border border-gray-200 rounded-lg shadow-lg p-1 z-10 hidden" data-menu-id="${topic.id}">
                                        <button class="topic-status-btn flex items-center justify-center w-8 h-8 hover:bg-gray-100 rounded" data-topic-id="${topic.id}" data-status="used" title="标记为已使用">
                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-green-600">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path>
                                            </svg>
                                        </button>
                                        <button class="topic-status-btn flex items-center justify-center w-8 h-8 hover:bg-gray-100 rounded" data-topic-id="${topic.id}" data-status="unused" title="标记为未使用">
                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-600">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        ${topic.status === 'used' ? '<div class="text-xs text-green-600 mb-2">✓ 已使用</div>' : ''}
                        <div class="topic-card-details mt-4 pt-4 border-t border-gray-100 text-sm text-gray-600 leading-relaxed">
                            <p>${topic.details}</p>
                        </div>
                    `;

                    card.addEventListener('click', () => {
                        card.classList.toggle('open');
                    });

                    topicGrid.appendChild(card);
                });
            }

            function renderLibrary() {
                libraryList.innerHTML = '';
                if (contentLibraryData.length === 0) {
                    libraryList.innerHTML = `<p class="text-center text-gray-500">内容库暂无内容。</p>`;
                    return;
                }
                contentLibraryData.forEach(item => {
                    const linkItem = document.createElement('a');
                    linkItem.href = item.url;
                    linkItem.target = "_blank"; // Open in a new tab
                    linkItem.className = "block p-4 bg-orange-50 rounded-lg hover:bg-amber-50 hover:shadow-sm transition-all duration-300";
                    linkItem.innerHTML = `
                        <div class="flex justify-between items-center">
                            <span class="font-semibold text-gray-800">${item.title}</span>
                            <span class="text-xs font-bold text-white py-1 px-3 rounded-full" style="background-color: #FF8C5A;">${item.type}</span>
                        </div>
                    `;
                    libraryList.appendChild(linkItem);
                });
            }

            pillarFilters.forEach(filter => {
                filter.addEventListener('click', () => {
                    pillarFilters.forEach(f => f.classList.remove('active'));
                    filter.classList.add('active');
                    const pillar = filter.dataset.pillar;
                    renderTopics(pillar);
                });
            });

            clearFilterBtn.addEventListener('click', () => {
                pillarFilters.forEach(f => f.classList.remove('active'));
                renderTopics();
            });
            
            function renderChart() {
                const ctx = document.getElementById('pillarsChart').getContext('2d');
                const pillarCounts = topicsData.reduce((acc, topic) => {
                    acc[topic.pillar] = (acc[topic.pillar] || 0) + 1;
                    return acc;
                }, {});
                const labels = Object.keys(pillarCounts);
                const data = Object.values(pillarCounts);
                
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: '选题数量',
                            data: data,
                            backgroundColor: [
                                'rgba(78, 205, 196, 0.7)',
                                'rgba(255, 140, 90, 0.7)',
                                'rgba(255, 193, 7, 0.7)'
                            ],
                            borderColor: [
                                'rgba(78, 205, 196, 1)',
                                'rgba(255, 140, 90, 1)',
                                'rgba(255, 193, 7, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            title: {
                                display: true,
                                text: '选题支柱分布',
                                font: {
                                    size: 16
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    stepSize: 1
                                }
                            }
                        }
                    }
                });
            }

            // 渲染已使用的选题
            function renderUsedTopics() {
                const usedTopicsGrid = document.getElementById('used-topics-grid');
                const usedTopics = topicsData.filter(t => t.status === 'used');
                
                usedTopicsGrid.innerHTML = '';
                
                if (usedTopics.length === 0) {
                    usedTopicsGrid.innerHTML = '<p class="text-center text-gray-500 col-span-full">暂无已使用的选题</p>';
                    return;
                }
                
                usedTopics.forEach(topic => {
                    const card = document.createElement('div');
                    card.className = 'topic-card bg-gray-50 p-5 rounded-2xl shadow-sm cursor-pointer transition-all duration-300';
                    card.dataset.pillar = topic.pillar;
                    
                    let pillarColorClass = '';
                    switch (topic.pillar) {
                        case '人生解惑': pillarColorClass = 'text-teal-600'; break;
                        case '情绪工具': pillarColorClass = 'text-orange-600'; break;
                        case '禁忌揭秘': pillarColorClass = 'text-amber-600'; break;
                        case '实用指南': pillarColorClass = 'text-purple-600'; break;
                    }
                    
                    card.innerHTML = `
                        <div class="flex justify-between items-start mb-2">
                            <h4 class="font-bold text-md flex-1 pr-2">${topic.title}</h4>
                            <div class="flex items-center gap-2">
                                <span class="text-xs font-semibold ${pillarColorClass} bg-opacity-20 bg-${pillarColorClass.split('-')[1]}-100 py-1 px-2 rounded-full">${topic.pillar}</span>
                                <div class="relative">
                                    <button class="topic-menu-btn text-gray-400 hover:text-gray-600 p-1" data-topic-id="${topic.id}">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="5" r="1"></circle>
                                            <circle cx="12" cy="12" r="1"></circle>
                                            <circle cx="12" cy="19" r="1"></circle>
                                        </svg>
                                    </button>
                                    <div class="topic-menu absolute right-0 top-6 bg-white border border-gray-200 rounded-lg shadow-lg p-1 z-10 hidden" data-menu-id="${topic.id}">
                                        <button class="topic-status-btn flex items-center justify-center w-8 h-8 hover:bg-gray-100 rounded" data-topic-id="${topic.id}" data-status="used" title="标记为已使用">
                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-green-600">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path>
                                            </svg>
                                        </button>
                                        <button class="topic-status-btn flex items-center justify-center w-8 h-8 hover:bg-gray-100 rounded" data-topic-id="${topic.id}" data-status="unused" title="标记为未使用">
                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-600">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="text-xs text-green-600 mb-2">✓ 已使用</div>
                        <div class="topic-card-details mt-4 pt-4 border-t border-gray-100 text-sm text-gray-600 leading-relaxed">
                            <p>${topic.details}</p>
                        </div>
                    `;
                    
                    card.addEventListener('click', () => {
                        card.classList.toggle('open');
                    });
                    
                    usedTopicsGrid.appendChild(card);
                });
            }
            
            // 处理选题状态菜单
            document.addEventListener('click', function(e) {
                // 处理菜单按钮点击
                if (e.target.closest('.topic-menu-btn')) {
                    e.stopPropagation();
                    const btn = e.target.closest('.topic-menu-btn');
                    const topicId = btn.dataset.topicId;
                    const menu = document.querySelector(`[data-menu-id="${topicId}"]`);
                    
                    // 关闭其他菜单
                    document.querySelectorAll('.topic-menu').forEach(m => {
                        if (m !== menu) m.classList.add('hidden');
                    });
                    
                    // 切换当前菜单
                    menu.classList.toggle('hidden');
                }
                
                // 处理状态按钮点击
                if (e.target.closest('.topic-status-btn')) {
                    e.stopPropagation();
                    const btn = e.target.closest('.topic-status-btn');
                    const topicId = parseInt(btn.dataset.topicId);
                    const newStatus = btn.dataset.status;
                    
                    // 更新选题状态
                    const topic = topicsData.find(t => t.id === topicId);
                    if (topic) {
                        topic.status = newStatus;
                        
                        // 重新渲染
                        renderTopics();
                        renderUsedTopics();
                        
                        // 关闭菜单
                        document.querySelectorAll('.topic-menu').forEach(m => m.classList.add('hidden'));
                    }
                }
                
                // 点击其他地方关闭菜单
                if (!e.target.closest('.topic-menu-btn') && !e.target.closest('.topic-menu')) {
                    document.querySelectorAll('.topic-menu').forEach(m => m.classList.add('hidden'));
                }
            });

            renderTopics();
            renderLibrary();
            renderUsedTopics();
            renderChart();
            
            // Add Article functionality
            const addArticleBtn = document.getElementById('add-article-btn');
            const addArticleModal = document.getElementById('add-article-modal');
            const addArticleForm = document.getElementById('add-article-form');
            const cancelArticleBtn = document.getElementById('cancel-article');
            const articleConfig = document.getElementById('article-config');
            const configCode = document.getElementById('config-code');

            addArticleBtn.addEventListener('click', () => {
                addArticleModal.classList.remove('hidden');
                addArticleModal.classList.add('flex');
            });
            
            cancelArticleBtn.addEventListener('click', () => {
                addArticleModal.classList.add('hidden');
                addArticleModal.classList.remove('flex');
                addArticleForm.reset();
                articleConfig.classList.add('hidden');
            });
            
            addArticleForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const title = document.getElementById('article-title').value;
                const id = document.getElementById('article-id').value;
                const type = document.getElementById('article-type').value;
                const format = document.getElementById('article-format').value;
                
                const config = {
                    id: id,
                    title: title,
                    type: type,
                    url: `./article.html?topic=${id}${format === 'md' ? '&format=md' : ''}`
                };
                
                configCode.textContent = JSON.stringify(config, null, 4) + ',';
                articleConfig.classList.remove('hidden');
                
                // Create instructions
                const instructions = document.createElement('div');
                instructions.className = 'mt-4 p-4 bg-amber-50 rounded-lg text-sm';
                instructions.innerHTML = `
                    <h5 class="font-bold mb-2">下一步操作：</h5>
                    <ol class="list-decimal list-inside space-y-1">
                        <li>在 VS Code 中创建文件 <code class="bg-white px-1 py-0.5 rounded">/articles/${id}.${format}</code></li>
                        <li>将上述配置添加到 index.html 中的 contentLibraryData 数组</li>
                        <li>提交并推送到 GitHub，Vercel 会自动部署</li>
                    </ol>
                `;
                
                // 移除旧的说明
                const oldInstructions = articleConfig.querySelector('.mt-4');
                if (oldInstructions) {
                    oldInstructions.remove();
                }
                
                articleConfig.appendChild(instructions);
            });

            // Add logout functionality
            const logoutBtn = document.createElement('button');
            logoutBtn.textContent = '退出登录';
            logoutBtn.className = 'fixed top-4 right-4 text-sm text-gray-600 hover:text-gray-800 z-10';
            logoutBtn.addEventListener('click', () => {
                localStorage.removeItem('authToken');
                location.reload();
            });
            document.body.appendChild(logoutBtn);
        }

        document.addEventListener('DOMContentLoaded', () => {
            const loginOverlay = document.getElementById('login-overlay');
            const loginForm = document.getElementById('login-form');
            const passwordInput = document.getElementById('password-input');
            const errorMessage = document.getElementById('error-message');
            const mainContent = document.getElementById('main-content');
            
            // 检查是否已登录
            const authToken = localStorage.getItem('authToken');
            if (authToken) {
                // 验证 token 是否有效（简单检查）
                loginOverlay.style.display = 'none';
                mainContent.classList.remove('hidden');
                initializeDashboard();
            }

            loginForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const enteredPassword = passwordInput.value;
                
                try {
                    // 如果是本地开发，使用本地验证
                    if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
                        if (enteredPassword === 'sanmu123') {
                            localStorage.setItem('authToken', 'local-dev-token');
                            loginOverlay.style.display = 'none';
                            mainContent.classList.remove('hidden');
                            initializeDashboard();
                        } else {
                            throw new Error('密码错误');
                        }
                        return;
                    }
                    
                    // 生产环境使用 API
                    const response = await fetch('/api/auth', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ password: enteredPassword })
                    });
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        localStorage.setItem('authToken', data.token);
                        loginOverlay.style.display = 'none';
                        mainContent.classList.remove('hidden');
                        initializeDashboard();
                    } else {
                        throw new Error(data.message || '密码错误');
                    }
                } catch (error) {
                    errorMessage.textContent = error.message || '密码错误，请重试';
                    passwordInput.classList.add('login-error');
                    setTimeout(() => {
                        passwordInput.classList.remove('login-error');
                    }, 500);
                }
            });

        });
    </script>
</body>
</html>
